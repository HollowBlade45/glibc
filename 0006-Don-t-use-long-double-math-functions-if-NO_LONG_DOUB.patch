From 591b7e37e6be2a2d6672b683ba1191095b10d6d5 Mon Sep 17 00:00:00 2001
From: Andreas Schwab <schwab@suse.de>
Date: Tue, 23 Feb 2016 16:27:56 +0100
Subject: [PATCH 06/20] Don't use long double math functions if NO_LONG_DOUBLE

---
 ChangeLog                | 5 +++++
 math/test-math-isinff.cc | 7 ++++++-
 2 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/ChangeLog b/ChangeLog
index 7895446..d1a4520 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,8 @@
+2016-02-24  Andreas Schwab  <schwab@suse.de>
+
+	* math/test-math-isinff.cc (do_test): Only call isinfl and isnanl
+	if !NO_LONG_DOUBLE.
+
 2016-02-22  Roland McGrath  <roland@hack.frob.com>
 
 	* sysdeps/arm/nacl/libc.abilist (GLIBC_2.23): Add GLIBC_2.23,
diff --git a/math/test-math-isinff.cc b/math/test-math-isinff.cc
index 195d753..ecff1dc 100644
--- a/math/test-math-isinff.cc
+++ b/math/test-math-isinff.cc
@@ -30,12 +30,17 @@ do_test (void)
      header fix this test will not compile.  */
   if (isinff (1.0f)
       || !isinff (INFINITY)
+#ifndef NO_LONG_DOUBLE
       || isinfl (1.0L)
       || !isinfl (INFINITY)
+#endif
       || isnanf (2.0f)
       || !isnanf (NAN)
+#ifndef NO_LONG_DOUBLE
       || isnanl (2.0L)
-      || !isnanl (NAN))
+      || !isnanl (NAN)
+#endif
+      )
     {
       printf ("FAIL: Failed to call is* functions.\n");
       exit (1);
-- 
2.8.0

